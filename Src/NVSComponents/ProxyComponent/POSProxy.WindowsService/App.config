<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="volvo.nvs.integration" type="Volvo.NVS.Integration.Configuration.IntegrationSection, Volvo.NVS.Integration" />
    <section name="integration.config" type="Volvo.NVS.Integration.WindowsServices.Config.IntegrationSection, Volvo.NVS.Integration.WindowsServices" />
    <section name="hibernate-configuration" type="NHibernate.Cfg.ConfigurationSectionHandler, NHibernate" />
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net" />
    <section name="enterpriseLibrary.ConfigurationSource" type="Microsoft.Practices.EnterpriseLibrary.Common.Configuration.ConfigurationSourceSection, Microsoft.Practices.EnterpriseLibrary.Common, Version=6.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <!--To allow mapping by code-->
    <section name="nhibernate.mappingbycode" type="Volvo.NVS.Persistence.NHibernate.Config.NHibernateMappingSection, Volvo.NVS.Persistence.NHibernate" />
    <section name="volvo.nvs.winservice" type="Volvo.NVS.Utilities.WindowsServices.Config.WinServiceSection, Volvo.NVS.Utilities.WindowsServices" />
  </configSections>
  
  <appSettings>
    <add key="ListenerUser" value="cs-ws-s-POS-Listener" />
    <add key="Environment" value="Local" />
  </appSettings>
  
  <enterpriseLibrary.ConfigurationSource selectedSource="File Configuration Source">
    <sources>
      <add name="File Configuration Source" type="Microsoft.Practices.EnterpriseLibrary.Common.Configuration.FileConfigurationSource, Microsoft.Practices.EnterpriseLibrary.Common, Version=6.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" filePath="Entlib.config" />
    </sources>
  </enterpriseLibrary.ConfigurationSource>
  
  <integration.config>
    <listeners>
      <add listener="PartReservationResponseQueue" service="PartReservationResponse" start="true" />
      <add listener="PartsAvailabilityQueue" service="PartsAvailability" start="true" />
    </listeners>
  </integration.config>
  
  <!-- integration configuration -->
  <volvo.nvs.integration>
    <!-- .. and it's channels -->
    <channels>
      <!-- Note the below DNS should be mapped in hosts file. This mapping should be done based on WMQ Server IP/Hosts -->
      <!-- Refer NVS Integration Library handbook to know more about below Uri-->
      <add name="PartReservationResponseQueue" uri="mqin://eowyn-a3.it.volvo.net@EOWYN_A3:1437/ADTNET.SRV01?queue=ADTNET.POS.DEV.PARTRES.REPLY.IN?PollInterval=10" />
      <add name="PartsAvailabilityQueue" uri="mqin://eowyn-a3.it.volvo.net@EOWYN_A3:1437/ADTNET.SRV01?queue=ADTNET.POS.DEV.PARTS.IN?PollInterval=10" />
      <!--
      <add name="PartReservationResponseQueue" uri="mqin://nvs-int-vmware@EOWYN_A3:1437/ADTNET.SRV01?queue=ADTNET.POS.DEV.PARTRES.REPLY.IN?PollInterval=10" />
      <add name="PartsAvailabilityQueue" uri="mqin://nvs-int-vmware@EOWYN_A3:1437/ADTNET.SRV01?queue=ADTNET.POS.DEV.PARTS.IN?PollInterval=10" />
      -->
    </channels>
  </volvo.nvs.integration>
  
  <volvo.nvs.winservice>
    <service.info name="POSListener" description="POS Listener" />
  </volvo.nvs.winservice>
  
  <hibernate-configuration configSource="NHibernate.config" />
  
  <nhibernate.mappingbycode>
    <mappings>
      <add assembly="OrderDomain.Infrastructure" />
      <add assembly="PartDomain.Infrastructure" />
      <add assembly="UserDomain.Infrastructure" />
    </mappings>
  </nhibernate.mappingbycode>
  
  <log4net debug="false">
    <!-- Define some output appenders -->
    <appender name="trace" type="log4net.Appender.TraceAppender, log4net">
      <layout type="log4net.Layout.PatternLayout,log4net">
        <param name="ConversionPattern" value="%d{ABSOLUTE} %-5p %c{1}:%L - %m%n" />
      </layout>
    </appender>
    <appender name="console" type="log4net.Appender.ConsoleAppender, log4net">
      <layout type="log4net.Layout.PatternLayout,log4net">
        <param name="ConversionPattern" value="%d{ABSOLUTE} %-5p %c{1}:%L - %m%n" />
      </layout>
    </appender>
    <appender name="rollingFile" type="log4net.Appender.RollingFileAppender,log4net">
      <param name="File" value="log.txt" />
      <param name="AppendToFile" value="false" />
      <param name="RollingStyle" value="Date" />
      <param name="DatePattern" value="yyyy.MM.dd" />
      <param name="StaticLogFileName" value="true" />
      <layout type="log4net.Layout.PatternLayout,log4net">
        <param name="ConversionPattern" value="%d [%t] %-5p %c - %m%n" />
      </layout>
    </appender>
    <!-- Setup the root category, add the appenders and set the default priority -->
    <root>
      <priority value="DEBUG" />
      <appender-ref ref="console" />
    </root>
  </log4net>
  
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>

  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Practices.ServiceLocation" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-1.3.0.0" newVersion="1.3.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Practices.Unity" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-3.5.0.0" newVersion="3.5.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Practices.Unity.Interception" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-3.5.0.0" newVersion="3.5.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Volvo.NVS.Core" publicKeyToken="23cd044cdee01a66" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Volvo.NVS.Utilities.WindowsServices" publicKeyToken="23cd044cdee01a66" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="AutoMapper" publicKeyToken="be96cd2c38ef1005" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.2.1.0" newVersion="4.2.1.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Volvo.NVS.Integration" publicKeyToken="23cd044cdee01a66" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.2.0" newVersion="2.0.2.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-9.0.0.0" newVersion="9.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Practices.EnterpriseLibrary.Common" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  
</configuration>
